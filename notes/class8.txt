Ejecutando un query

La parte m谩s importante de conectarse a una base de datos es la obtenci贸n de las mismas para su posterior uso.

C贸mo realizar consultas a la base
Teniendo establecida la conexi贸n a la base de datos, puedes ejecutar consultas de manera muy sencilla en tus servicios.

// src/app.service.ts
import { Db } from 'mongodb';

@Injectable()
export class AppService {

  constructor(@Inject('MONGO') private database: Db,) {}

  getProducts() {
    const productCollection = this.database.collection('products');
    return productCollection.find().toArray();
  }
}
Puedes utilizar estas consultas en tus controladores para la creaci贸n de endpoints.

// src/app.controller.ts
import { AppService } from './app.service';

@Controller()
export class AppController {

  constructor(private readonly appService: AppService) {}

  @Get('/products')
  getProducts() {
    return this.appService.getProducts();
  }
}
As铆, tienes ya disponible la creaci贸n de todo un CRUD con persistencia en base de datos MongoDB para que juegues con tu aplicaci贸n.

Contribuci贸n creada por: Kevin Fiorentino.

C贸digo de ejemplo para ejecutar una query
// src/app.service.ts

...
@Injectable()
export class AppService {
  ...

  getTasks() { //  Query
    const tasksCollection = this.database.collection('tasks');
    return tasksCollection.find().toArray();
  }
}
// src/app.controller.ts
import { AppService } from './app.service';

@Controller()
export class AppController {
  constructor(private readonly appService: AppService) {}
  ...

  @Get('/tasks/') //  New endpoint
  getTasks() {
    return this.appService.getTasks();
  }
}
